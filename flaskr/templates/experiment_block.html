<div class="container">
    <h2>Эксперимент</h2>
    <div class="alert alert-info" role="alert">
        <strong>Статус:</strong> <span id="experiment-status">{{ device.params.status }}</span> |
        <strong>Последнее обновление:</strong> <span id="last-update">{{ device.params.last_response }}</span>
    </div>
    
    <div class="mb-3">
        <label for="command-select" class="form-label">Команды</label>
        <select id="command-select" class="form-select">
            {% for command in device.commands.keys() %}
                <option value="{{ command }}">{{ command }}</option>
            {% endfor %}
        </select>
    </div>
    
    <div class="mb-3">
        <label for="command-args" class="form-label">Аргументы</label>
        <input type="text" id="command-args" class="form-control" placeholder="Введите аргументы">
    </div>
    
    <button type="button" class="btn btn-primary" onclick="sendExperimentCommand()">Отправить команду</button>
    
    <div class="progress mt-3">
        {% set total_stages = device.params.stages | length %}
        {% set progress_percentage = (device.params.step / (total_stages - 1)) * 100 if total_stages > 1 else 100 %}
        
        <div class="progress-bar" role="progressbar" style="width: {{ progress_percentage }}%;" aria-valuenow="{{ progress_percentage }}" aria-valuemin="0" aria-valuemax="100">
            Шаг {{ device.params.step }}/{{ total_stages }} - {{ device.params.current_stage_name }}
        </div>
    </div>
    <!-- <div class="mt-4"></div>
        <h3>Информация о устройствах</h3>
        <div class="row">
            {% for device in devices %}
                {% if device.params.type != 'task' %}
                <div class="col-12 mb-3">
                    <div class="card">
                        <div class="card-body d-flex justify-content-between align-items-center">
                            <span><strong>Устройство ID:</strong> {{ device.params.device_id }}</span>
                            <span><strong>Имя:</strong> {{ device.params.name }}</span>
                            <span><strong>Статус:</strong> <span class="status-indicator">{{ device.params.status }}</span></span>
                            <span><strong>Дата обновления:</strong> {{ device.params.last_time_active }}</span>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div> 
    </div> -->
</div>